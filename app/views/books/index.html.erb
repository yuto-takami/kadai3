<!DOCTYPE html>
<html>
  <head>
  </head>

  <body>
    <% if @book.errors.any? %>
      <div id="error_explanation" class="alert alert-danger">
        <ul>
          <%= @book.errors.count %>error found
          <% @book.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <div class="container">
      <div class="row">
        <div class="col-md-3">
          <%= render 'users/list', user: @user, book: @book %>
        </div>


        <div class="col-md-8 offset-md-1">
          <h2>Books</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th></th>
                <th>Title</th>
                <th>Opinion</th>
              </tr>
            </thead>
            <tbody>
              <% @books.each do |books| %>
              <tr id="book_<%= books.id %>">
                <td>
                  <%= link_to user_path(books.user) do %>
                  <%= attachment_image_tag books.user, :profile_image, :fill, 40, 40, fallback: "no_image.jpg",size: '40x40' %>
                  <% end %>
                </td>
                <td>
                <%= link_to book_path(books.id) do %>
                <%= books.title %>
                <% end %>
                </td>
                <td><%= books.body %></td>
                <td class="favorite-btn">
                  <%= render 'favorites/favorite-button', books: books %>
                </td>
                <td class="comments-count">
                  コメント数: <%= books.book_comments.count %>
                </td>
              </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </body>
</html>